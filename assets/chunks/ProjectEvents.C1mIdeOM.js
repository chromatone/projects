import{L as B,M as g,_ as W,N as G,c as h,o as u,a as c,q as P,O as J,J as v,e as T,E as f,b as Z,P as F,Q as N,F as Y,G as z,T as U}from"./framework.CvtlFxFe.js";var $="/",V=(e,t)=>(e.endsWith($)&&(e=e.slice(0,-1)),t.startsWith($)||(t=$+t),e+t),I=(e,t,s)=>{let r=e.pathname===$?t:V(e.pathname,t),o=new globalThis.URL(r,e);if(s)for(let[l,i]of Object.entries(re(s)))if(i&&typeof i=="object"&&!Array.isArray(i))for(let[n,d]of Object.entries(i))o.searchParams.set(`${l}[${n}]`,String(d));else o.searchParams.set(l,i);return o};function X(e){return typeof e!="object"||!e?!1:"headers"in e&&"ok"in e&&"json"in e&&typeof e.json=="function"&&"text"in e&&typeof e.json=="function"}async function K(e){var t;if(!(typeof e!="object"||!e)){if(X(e)){let s=(t=e.headers.get("Content-Type"))==null?void 0:t.toLowerCase();if(s!=null&&s.startsWith("application/json")||s!=null&&s.startsWith("application/health+json")){let r=await e.json();if(!e.ok||"errors"in r)throw r;return"data"in r?r.data:r}if(s!=null&&s.startsWith("text/html")||s!=null&&s.startsWith("text/plain")){let r=await e.text();if(!e.ok)throw r;return r}return e.status===204?null:e}if("errors"in e)throw e;return"data"in e?e.data:e}}var Q=async(e,t,s=globalThis.fetch)=>(t.headers=typeof t.headers=="object"&&!Array.isArray(t.headers)?t.headers:{},s(e,t).then(r=>K(r).catch(o=>{let l={errors:o&&typeof o=="object"&&"errors"in o?o.errors:o,response:r};return o&&typeof o=="object"&&"data"in o&&(l.data=o.data),Promise.reject(l)}))),ee=e=>t=>{let s=e;return{async getToken(){return s},async setToken(r){s=r}}},C={fetch:globalThis.fetch,WebSocket:globalThis.WebSocket,URL:globalThis.URL,logger:globalThis.console},te=(e,t={})=>{let s=t.globals?{...C,...t.globals}:C;return{globals:s,url:new s.URL(e),with(r){return{...this,...r(this)}}}};function se(e){return["directus_access","directus_activity","directus_collections","directus_comments","directus_fields","directus_files","directus_folders","directus_migrations","directus_permissions","directus_policies","directus_presets","directus_relations","directus_revisions","directus_roles","directus_sessions","directus_settings","directus_users","directus_webhooks","directus_dashboards","directus_panels","directus_notifications","directus_shares","directus_flows","directus_operations","directus_translations","directus_versions","directus_extensions"].includes(e)}var oe=e=>{let t=(s,r=[])=>{if(typeof s=="object"){let o=[];for(let l in s){let i=s[l]??[];if(Array.isArray(i))for(let n of i)o.push(t(n,[...r,l]));else if(typeof i=="object")for(let n of Object.keys(i)){let d=i[n];for(let p of d)o.push(t(p,[...r,`${l}:${n}`]))}}return o.flatMap(l=>l)}return[...r,String(s)].join(".")};return e.flatMap(s=>t(s))},re=e=>{let t={};Array.isArray(e.fields)&&e.fields.length>0&&(t.fields=oe(e.fields).join(",")),e.filter&&Object.keys(e.filter).length>0&&(t.filter=JSON.stringify(e.filter)),e.search&&(t.search=e.search),"sort"in e&&e.sort&&(t.sort=typeof e.sort=="string"?e.sort:e.sort.join(",")),typeof e.limit=="number"&&e.limit>=-1&&(t.limit=String(e.limit)),typeof e.offset=="number"&&e.offset>=0&&(t.offset=String(e.offset)),typeof e.page=="number"&&e.page>=1&&(t.page=String(e.page)),e.deep&&Object.keys(e.deep).length>0&&(t.deep=JSON.stringify(e.deep)),e.alias&&Object.keys(e.alias).length>0&&(t.alias=JSON.stringify(e.alias)),e.aggregate&&Object.keys(e.aggregate).length>0&&(t.aggregate=JSON.stringify(e.aggregate)),e.groupBy&&e.groupBy.length>0&&(t.groupBy=e.groupBy.join(","));for(let[s,r]of Object.entries(e))s in t||(typeof r=="string"||typeof r=="number"||typeof r=="boolean"?t[s]=String(r):t[s]=JSON.stringify(r));return t},ie=(e,t)=>{if(e.length===0)throw new Error(t)},ae=(e,t)=>{if(se(String(e)))throw new Error(t)},ne=(e,t)=>()=>(ie(String(e),"Collection cannot be empty"),ae(e,"Cannot use readItems for core collections"),{path:`/items/${e}`,params:t??{},method:"GET"}),le={},ce=(e={})=>t=>{let s={...le,...e};return{async request(r){let o=r();if(o.headers||(o.headers={}),"Content-Type"in o.headers?o.headers["Content-Type"]==="multipart/form-data"&&delete o.headers["Content-Type"]:o.headers["Content-Type"]="application/json","getToken"in this&&!("Authorization"in o.headers)){let d=await this.getToken();d&&(o.headers.Authorization=`Bearer ${d}`)}let l=I(t.url,o.path,o.params),i={method:o.method??"GET",headers:o.headers??{}};"credentials"in s&&(i.credentials=s.credentials),o.body&&(i.body=o.body),o.onRequest&&(i=await o.onRequest(i)),s.onRequest&&(i=await s.onRequest(i));let n=await Q(l.toString(),i,t.globals.fetch);return"onResponse"in o&&(n=await o.onResponse(n,i)),"onResponse"in e&&(n=await e.onResponse(n,i)),n}}};typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const de=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[T\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/i,ue=/[YMDHhms]o|\[([^\]]+)\]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a{1,2}|A{1,2}|m{1,2}|s{1,2}|Z{1,2}|z{1,4}|SSS/g;function fe(e,t,s,r){let o=e<12?"AM":"PM";return r&&(o=o.split("").reduce((l,i)=>l+=`${i}.`,"")),s?o.toLowerCase():o}function x(e){const t=["th","st","nd","rd"],s=e%100;return e+(t[(s-20)%10]||t[s]||t[0])}function he(e,t,s={}){var r;const o=e.getFullYear(),l=e.getMonth(),i=e.getDate(),n=e.getHours(),d=e.getMinutes(),p=e.getSeconds(),M=e.getMilliseconds(),D=e.getDay(),y=(r=s.customMeridiem)!=null?r:fe,_=b=>{var m;return(m=b.split(" ")[1])!=null?m:""},w={Yo:()=>x(o),YY:()=>String(o).slice(-2),YYYY:()=>o,M:()=>l+1,Mo:()=>x(l+1),MM:()=>`${l+1}`.padStart(2,"0"),MMM:()=>e.toLocaleDateString(g(s.locales),{month:"short"}),MMMM:()=>e.toLocaleDateString(g(s.locales),{month:"long"}),D:()=>String(i),Do:()=>x(i),DD:()=>`${i}`.padStart(2,"0"),H:()=>String(n),Ho:()=>x(n),HH:()=>`${n}`.padStart(2,"0"),h:()=>`${n%12||12}`.padStart(1,"0"),ho:()=>x(n%12||12),hh:()=>`${n%12||12}`.padStart(2,"0"),m:()=>String(d),mo:()=>x(d),mm:()=>`${d}`.padStart(2,"0"),s:()=>String(p),so:()=>x(p),ss:()=>`${p}`.padStart(2,"0"),SSS:()=>`${M}`.padStart(3,"0"),d:()=>D,dd:()=>e.toLocaleDateString(g(s.locales),{weekday:"narrow"}),ddd:()=>e.toLocaleDateString(g(s.locales),{weekday:"short"}),dddd:()=>e.toLocaleDateString(g(s.locales),{weekday:"long"}),A:()=>y(n,d),AA:()=>y(n,d,!1,!0),a:()=>y(n,d,!0),aa:()=>y(n,d,!0,!0),z:()=>_(e.toLocaleDateString(g(s.locales),{timeZoneName:"shortOffset"})),zz:()=>_(e.toLocaleDateString(g(s.locales),{timeZoneName:"shortOffset"})),zzz:()=>_(e.toLocaleDateString(g(s.locales),{timeZoneName:"shortOffset"})),zzzz:()=>_(e.toLocaleDateString(g(s.locales),{timeZoneName:"longOffset"}))};return t.replace(ue,(b,m)=>{var S,k;return(k=m??((S=w[b])==null?void 0:S.call(w)))!=null?k:b})}function ge(e){if(e===null)return new Date(Number.NaN);if(e===void 0)return new Date;if(e instanceof Date)return new Date(e);if(typeof e=="string"&&!/Z$/i.test(e)){const t=e.match(de);if(t){const s=t[2]-1||0,r=(t[7]||"0").substring(0,3);return new Date(t[1],s,t[3]||1,t[4]||0,t[5]||0,t[6]||0,r)}}return new Date(e)}function H(e,t="HH:mm:ss",s={}){return B(()=>he(ge(g(e)),g(t),s))}const pe={class:"iframe-container max-w-100vw shadow-lg rounded-lg bg-cover min-h-60"},me=["src"],ye=["src"],_e={__name:"YoutubeEmbed",props:{video:{type:String}},setup(e){const t=G(!1);return(s,r)=>(u(),h("div",pe,[t.value?(u(),h("iframe",{key:1,class:"overflow-hidden",loading:"lazy",src:`https://www.youtube-nocookie.com/embed/${e.video}`,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""},null,8,ye)):(u(),h("div",{key:0,class:"flex items-center relative w-full bg-cover cursor-pointer op-80 hover-op-100 transition max-w-100vw",onClick:r[0]||(r[0]=o=>t.value=!0)},[c("img",{class:"w-full",src:`https://img.youtube.com/vi/${e.video}/hqdefault.jpg`},null,8,me),r[1]||(r[1]=c("div",{class:"i-la-play-circle text-xl"},null,-1))]))]))}},q=W(_e,[["__scopeId","data-v-25d3c356"]]),be={class:"text-2xl"},xe={key:1,class:"flex flex-wrap gap-4 m-4"},ve={key:0,class:"bg-light-800 dark-bg-dark-200 rounded-xl shadow-lg p-4 relative flex flex-col gap-4"},we=["src"],Se={class:"text-2xl flex items-baseline gap-4"},ke={class:"text-lg op-80 font-mono"},je={class:"text-md"},Me={key:0,class:"text-md bg-light-900 dark-bg-dark-400 p-4 flex flex-col gap-4"},De={key:2,class:"flex flex-col gap-4 my-4"},$e={class:"flex-0 text-sm"},Te={class:"flex-1 font-bold"},Ye={class:"flex-0 op-70 text-sm"},Oe={class:"text-md max-w-45ch"},Le=["href"],Ae=["src"],Re={class:"flex flex-col p-2 gap-2",style:{flex:"10 1 180px"}},Ee={class:"flex items-baseline flex-wrap gap-2"},Ne={class:"text-2xl"},ze={class:"text-sm op-80 font-mono"},Ce={class:"text-md"},qe={__name:"ProjectEvents",props:{id:{type:String,default:""}},setup(e){const t=e,s=G([]);P(async()=>{try{s.value=await te("https://db.chromatone.center/").with(ee("HDqt6uvSbGyYnL4tdi3jntEHOj7i_aYp")).with(ce()).request(ne("events",{filter:{project:{id:{_eq:t.id}}},fields:["*","title","description","cover.id","poster.id"]}))}catch{console.log("Projects fetch failed")}});const r=J(),o=B(()=>r.hash&&s.value.find(l=>l.slug==r.hash.split("#")[1]));return(l,i)=>(u(),h(Y,null,[s.value.length?(u(),h("div",{key:0,class:"flex mx-4 items-baseline bg-light-800 dark-bg-dark-800 p-4",onClick:i[0]||(i[0]=n=>T(r).hash="")},[i[1]||(i[1]=c("div",{class:"text-3xl font-bold"},"Events ",-1)),i[2]||(i[2]=c("div",{class:"flex-1"},null,-1)),c("div",be,f(o.value?"1/":"")+f(s.value.length),1)])):v("",!0),s.value.length?(u(),h("div",xe,[Z(U,{name:"fade"},{default:F(()=>{var n,d,p,M,D,y,_,w,b,m,S,k,O,L,A,R;return[o.value?(u(),h("div",ve,[i[4]||(i[4]=c("a",{class:"text-xl absolute top-4 right-4",href:"#"},[c("div",{class:"i-la-times"})],-1)),c("img",{class:"w-full",style:{flex:"1 1 200px",margin:"0em"},src:`https://db.chromatone.center/assets/${((d=(n=o.value)==null?void 0:n.cover)==null?void 0:d.id)||((M=(p=o.value)==null?void 0:p.poster)==null?void 0:M.id)}?width=600`},null,8,we),c("div",Se,f((D=o.value)==null?void 0:D.title),1),c("div",ke,f(T(H)((y=o.value)==null?void 0:y.date,"DD MMMM YYYY")),1),c("div",je,f((_=o.value)==null?void 0:_.description),1),(w=o.value)!=null&&w.announcement?(u(),h("div",Me,f((b=o.value)==null?void 0:b.announcement),1)):v("",!0),(m=o.value)!=null&&m.youtube_video?(u(),N(q,{key:1,video:(S=o.value)==null?void 0:S.youtube_video},null,8,["video"])):v("",!0),(k=o.value)!=null&&k.schedule?(u(),h("div",De,[i[3]||(i[3]=c("div",{class:"text-2xl font-bold"},"Schedule",-1)),(u(!0),h(Y,null,z((O=o.value)==null?void 0:O.schedule,a=>{var j;return u(),h("div",{class:"p-2 bg-light-800 dark-bg-dark-600 font-mono flex flex-wrap items-center gap-2",key:a},[c("div",$e,f((j=a==null?void 0:a.time)==null?void 0:j.slice(0,5)),1),c("div",Te,f(a==null?void 0:a.activity),1),c("div",Ye,f(a==null?void 0:a.duration),1)])}),128))])):v("",!0),c("div",Oe,f((L=o.value)==null?void 0:L.content),1),(A=o.value)!=null&&A.livestream?(u(),N(q,{key:3,video:(R=o.value)==null?void 0:R.livestream},null,8,["video"])):v("",!0)])):(u(!0),h(Y,{key:1},z(s.value,a=>{var j,E;return u(),h("a",{class:"no-underline bg-light-700 shadow-lg dark-bg-dark-200 flex flex-wrap gap-1",key:a==null?void 0:a.slug,href:`#${a==null?void 0:a.slug}`,style:{flex:"1 1 420px"}},[c("img",{class:"max-h-200px",style:{flex:"1 1 200px",margin:".5em"},src:`https://db.chromatone.center/assets/${((j=a==null?void 0:a.cover)==null?void 0:j.id)||((E=a==null?void 0:a.poster)==null?void 0:E.id)}?width=200&height=200`},null,8,Ae),c("div",Re,[c("div",Ee,[c("div",Ne,f(a==null?void 0:a.title),1),c("div",ze,f(T(H)(a==null?void 0:a.date,"DD MMMM YYYY")),1)]),c("div",Ce,f(a==null?void 0:a.description),1)])],8,Le)}),128))]}),_:1})])):v("",!0)],64))}};export{qe as default};
